<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
<script>


    var clientCode;
    function initCode(){
        alert("初始化googlesdk---333");
            clientCode = google.accounts.oauth2.initCodeClient({
            client_id: '550948425386-0dm4gski8f5evdgvts3klqpp54n07h5s.apps.googleusercontent.com',
            scope: 'email profile https://www.googleapis.com/auth/userinfo.profile',
            ux_mode: 'redirect',
            //redirect_uri: "https://xumoumou1.github.io/test/assets/main/index.html",
                redirect_uri: "https://localhost:8443",
                callback: callbackCode,
            state: "clm"
        });
    }


    var clientToken;
    function initToken(){
        clientToken = google.accounts.oauth2.initTokenClient({
            client_id: '550948425386-0dm4gski8f5evdgvts3klqpp54n07h5s.apps.googleusercontent.com',
            scope: 'email profile https://www.googleapis.com/auth/userinfo.profile',
            ux_mode: 'redirect',
            //redirect_uri: "https://xumoumou1.github.io/test/assets/main/index.html",
            redirect_uri: "https://localhost:8443",
            callback: callbackToken,
            state: "clm"
        });
    }

    function getCode(){
        clientCode.requestCode();
    }

    function getToken(){
        clientToken.requestAccessToken();
    }

    function callbackCode(response){
        console.log("response:"+response);
    }

    function callbackToken(response){
        console.log("response:"+response);
    }

    window.onload = function(){
        var url=window.location.href;
        console.log("url:"+url);
        var split = url.split("code=");
        console.log("splot:"+split.length);
        if(split==null||split.length<=1){
            return;
        }
        var code = split[1].split("&")[0];
        console.log("code:"+code);

       document.getElementById("text").innerText = code;
    }

</script>
<html>
  <head>
      <script src="https://accounts.google.com/gsi/client" async></script>
    <title>这是一个demo</title>
     <button type="button" onclick="initCode()">code 初始化</button>
      <button type="button" onclick="getCode()">code 登录</button>

      <button type="button" onclick="initToken()">token 初始化</button>
      <button type="button" onclick="getToken()">token 登录</button>


      <p style="color: red" id="text"></p>
  </head>
  <body>

  </body>
</html>
