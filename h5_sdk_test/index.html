<!DOCTYPE html>
<html>
<head>
    <title>Google Sign-In Example</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        window.onload = function() {
            initGoogleSignIn();
        };

        function initGoogleSignIn() {
            google.accounts.id.initialize({
                client_id: '550948425386-0dm4gski8f5evdgvts3klqpp54n07h5s.apps.googleusercontent.com',
                ux_mode: 'popup',
            });

            google.accounts.id.prompt(notification => {
                if (notification.isNotDisplayed()) {
                    handleSignIn();
                }
            });
        }

        function handleSignIn() {
            google.accounts.id.prompt().then(response => {
                if (response.credential) {
                    var credential = response.credential;
                    var idToken = credential.id_token;
                    
                    // 发送 idToken 给后端进行验证和授权登录操作
                    // ...
                    
                    console.log('授权登录成功！');
                    console.log('ID Token: ' + idToken);
                } else {
                    console.error('授权登录失败，请重试！');
                }
            });
        }
    </script>
</head>
<body>
    <button onclick="handleSignIn()">使用 Google 登录</button>
</body>
</html>
