<!DOCTYPE html>
<html>
<head>
    <title>Google Sign-In Example</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        window.onload = function() {
            initGoogleSignIn();
        };

        function initGoogleSignIn() {
            google.accounts.id.initialize({
                client_id: '550948425386-0dm4gski8f5evdgvts3klqpp54n07h5s.apps.googleusercontent.com',
                ux_mode: 'popup',
            });

            var signInButton = document.getElementById('google-signin-button');
            signInButton.addEventListener('click', handleSignIn);
        }

        function handleSignIn() {
            google.accounts.id.prompt(notification => {
                if (notification.isDisplayed()) {
                    notification.finish();
                } else {
                    console.error('无法显示登录弹窗，请重试！');
                }
            });
        }

        // 登录成功后的回调函数
        function handleLoginSuccess(response) {
            var credential = response.credential;
            var idToken = credential.id_token;
            
            // 发送 idToken 给后端进行验证和授权登录操作
            // ...
            
            console.log('授权登录成功！');
            console.log('ID Token: ' + idToken);
        }
    </script>
</head>
<body>
    <button id="google-signin-button">使用 Google 登录</button>
</body>
</html>
